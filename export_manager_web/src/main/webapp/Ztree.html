<!DOCTYPE html>
<link rel="stylesheet" href="plugins/ztree/css/zTreeStyle/zTreeStyle.css">
<script src="plugins/ztree/js/jquery.ztree.all-3.5.js"></script>
<script src="plugins/ztree/js/jquery-1.4.4.min.js"></script>
<link rel="stylesheet" href="plugins/ztree/css/demo.css">


<HTML>
    <HEAD>
        <TITLE> ZTREE DEMO </TITLE>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">

        <!--1 修改为自己使用的文件地址-->
        <script src="plugins/ztree/js/jquery-1.4.4.min.js"></script>
        <script src="plugins/ztree/js/jquery.ztree.all-3.5.js"></script>
        <link rel="stylesheet" href="plugins/ztree/css/demo.css">
        <link rel="stylesheet" href="plugins/ztree/css/zTreeStyle/zTreeStyle.css">

        <SCRIPT LANGUAGE="JavaScript">
            // 声明树的对象
            var zTreeObj;

            // zTree 的参数配置 ，用于存储树的配置
            var setting = {
                // 配置enable:true, 是否使用简单模式。 下面为其他树对应属性
                data: {
                    simpleData: {
                        enable:true,
                        idKey:"id",
                        pIdKey:"pId",
                        rootPId:0
                    }
                },
                // 3 是否选择使用复选框或者单选框
                check: {
                    enable:true
                }
            };

            // zTree 的数据属性
            // checked:true 默认初始化的树的时候勾选某个节点
            var zNodes = [
                {id:1, pId:0, name: "父节点1"},
                // 默认勾选
                {id:11, pId:1, name: "子节点1", checked:true},
                {id:12, pId:1, name: "子节点2"}
            ];

            // 初始化树
            $(document).ready(function(){
                // 参数1：树的位置，参数2: 配置参数，参数3：树的数据属性
                zTreeObj = $.fn.zTree.init($("#treeDemo"), setting, zNodes);

                // expandAll 是否展开树所有的节点
                zTreeObj.expandAll(true);
            });
        </SCRIPT>
    </HEAD>
    <BODY>
        <!--2.准备div，方式这棵树的一个位置-->
        <div>
            <ul id="treeDemo" class="ztree"></ul>
        </div>

        <button id="btn">保存</button>

        <script>
            $('#btn').click(function (){
                // getCheckedNodes(true);  // 获取所有选中的节点
                var nodes = zTreeObj.getCheckedNodes(true);  // 获取所有选中的节点
                alert(nodes.length)
            })
        </script>

    </BODY>
</HTML>